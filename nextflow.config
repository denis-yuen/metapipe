manifest {
  homePage = 'https://gitlab.com/uit-sfb/metapipe'
  description = 'Metapipe -- Metagenomic pipeline'
  version = '0.1.0-SNAPSHOT'
}

executor {
  name = 'local'
  $local {
    cpus = 8
    memory = '54 GB'
    queueSize = 1
  }
}

process {
  //errorStrategy = 'finish'
  echo = false
  memory = '1 GB'
  cpus = 1
  withLabel: 'assembly' {
    ext.slices = 4
  }
  withName: 'Megahit' {
    cpus = 8
  }
  withName: 'KaijuProc' {
    cpus = 4
  }
  withLabel: 'functional_assignment' {
    ext.slices  = 4
  }
  withName: 'DiamondProc' {
    cpus = 8
    memory = '8 GB'
  }
  withName: 'InterproscanProc' {
    cpus = 8
    memory = '4 GB'
    ext.toolsCpu = 1
    ext.precalcService = ''
  }
}

docker {
  enabled = true
  temp = 'auto'
  registry = 'registry.gitlab.com/uit-sfb/metapipe'
  runOptions = '--user $(id -u)'
}